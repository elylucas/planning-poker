{"version":3,"sources":["../src/server.js"],"names":[],"mappings":";;;;;kBAIwB,WAAW;;;;;;;;;;;;;;AAApB,SAAS,WAAW,CAAC,KAAK,EAAC;AACxC,MAAM,EAAE,GAAG,sBAAY,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;;AAErC,IAAE,CAAC,GAAG,CAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC;AAC3C,IAAE,CAAC,EAAE,CAAC,YAAY,EAAE,UAAC,MAAM,EAAK;AAC9B,UAAM,CAAC,EAAE,CAAC,YAAY,EAAE,UAAC,IAAI,EAAK;AAChC,UAAI,MAAM,GAAG,0BAAW,CAAC;AACzB,aAAO,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;AACnC,WAAK,CAAC,QAAQ,CAAC,qBAXb,UAAU,EAWc,MAAM,EAC5B,EAAC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAC,CAC7D,CAAC,CAAC;AACH,YAAM,CAAC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,CAAA;AAC7B,aAAO,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAA;AAC7B,UAAI,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI,EAAG;AACpD,eAAO,IAAI,CAAC,EAAE,KAAK,MAAM,CAAC;OAC3B,CAAC,CAAA;AACF,aAAO,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAA;AAC7B,YAAM,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;KACjC,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ","file":"server.js","sourcesContent":["import Server from 'socket.io';\nimport {createRoom} from './action_creators';\nimport roomIdGen from './util/room-id-gen';\n\nexport default function startServer(store){\n  const io = new Server().attach(8090);\n\n  io.set('origins', 'http://localhost:8080');\n  io.on('connection', (socket) => {\n    socket.on('createRoom', (name) => {\n      let roomId = roomIdGen();\n      console.log(name + ' - ' + roomId);\n      store.dispatch(createRoom(roomId,\n          {'name': name, isSpectator: false, isAFK: false, vote: ''}\n      ));\n      socket.join('room-' + roomId)\n      console.log(store.getState())\n      var room = store.getState().get('rooms').find((room)=>{\n        return room.id === roomId;\n      })\n      console.log(store.getState())\n      socket.emit('joinedRoom', room);\n    });\n  });\n}\n"]}